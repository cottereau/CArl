<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CArl: Coupling matrices assembly</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CArl
   </div>
   <div id="projectbrief">Code Arlequin / C++ implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('traction_example_coupl_assemble.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Coupling matrices assembly </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Now that we have the mesh intersections, we can use them to build the coupling matrices. Three matrices will be constructed:</p>
<ul>
<li>Two \( n_{\mbox{Med}} \times n_l\) coupling matrices, noted as \(C_l\) ( \(m = 1,2\)).</li>
<li>One \( n_{\mbox{Med}} \times n_{\mbox{Med}}\) matrix, noted as \(C_{\mbox{Med}}\).</li>
</ul>
<p>\( n_{\mbox{Med}} \) and \( n_l \) are the number of degrees of freedom of the mediator and the model \( m \) meshes, respectively. The \(C_l\) matrices are the coupling matrices between the models and the mediator space used by the Arlequin method. The \(C_{\mbox{Med}}\) is completely defined inside the mediator space, and it is used by the conjugate gradient solver preconditioners. By default, the restricted mesh of the <code>Macro</code> / <code>A</code> model is used as the mediator.</p>
<p>Submiting <code>scripts/PBS_FETI_test_assemble_coupling_matrices_traction_test_1k.pbs</code> or executing <code>scripts/LOCAL_FETI_test_assemble_coupling_matrices_traction_test_1k.sh</code> will run the command </p>
<pre class="fragment">mpirun -n 4 ./CArl_assemble_coupling -i examples/coupled_traction_test/FETI_solver/brick_traction_1k/assemble_coupling_1k.txt
</pre><p><b>Note</b>: the <code>CArl_assemble_coupling</code> <em>MUST</em> be executed with the same number of processors as the intersection construction case. This is because each processor does most of the coupling matrices calculations independently, reading only one of the <code>[nb. of processors]</code> intersection meshes.</p>
<h1><a class="anchor" id="traction_example_coupl_assemble_input"></a>
Input</h1>
<p>File: examples/coupled_traction_test/FETI_solver/brick_traction_1k/assemble_coupling_1k.txt </p>
<pre class="fragment">### Coupling matrices assembly parameters
# - Model meshes
MeshA examples/coupled_traction_test/meshes/test_brick_A_1k.msh
MeshB examples/coupled_traction_test/meshes/test_brick_B_1k.msh

# - Intersection meshes and table files
InterBase examples/coupled_traction_test/intersection/output/inter_1k/inter

### Coupling parameters
# - Coupling region width (same unit as the meshes)
CouplingWidth 0.5

# - Coupling rigidity (in MPa, if mm was used for the meshes)
CouplingRigidity 2e5

# - Output folder path
OutputFolder examples/coupled_traction_test/FETI_solver/brick_traction_1k/coupling_matrices
</pre><p>Input file parameters:</p>
<ul>
<li><code>MeshA</code>, <code>MeshB</code>: as before, paths to the two model meshes.</li>
<li><code>InterBase</code>: common filename for the intersection and restriction meshes.</li>
<li><code>CouplingWidth</code>: width of the coupling region (same unit as the meshes, \(e\) in the \(L_2\) coupling term).</li>
<li><code>CouplingRigidity</code>: rigidity used for the coupling matrix (in MPa, if mm was used for the meshes, \(\kappa\) in both the \(L_2\) and \(H_1\) terms).</li>
<li><code>OutputFolder</code>: folder where the coupling matrices will be saved.</li>
</ul>
<p>Other optional parameters (not used here) include the paths to the restricted meshes and their mappings with the model meshes, and the choice of the mediator mesh. Those options are described at <a class="el" href="_c_arl__assemble__coupling_8cpp.html">CArl_assemble_coupling.cpp</a>.</p>
<h1><a class="anchor" id="traction_example_coupl_assemble_output"></a>
Output</h1>
<p>After running the coupling assembly program, the three matrices will be created inside the <code>OutputFolder</code>: </p>
<pre class="fragment">coupling_matrix_micro.petscmat
coupling_matrix_macro.petscmat
coupling_matrix_mediator.petscmat
</pre><p>These matrices are saved using PETSc's binary format. The extension <code>.petscmat</code> is arbitrary. Three other files, named <code>***.info</code>, contain some information on how PETSc should read these files (mainly, the matric block size). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="cpp_main.html">CArl C++</a></li><li class="navelem"><a class="el" href="cpp_static.html">CArl-Static Solver</a></li><li class="navelem"><a class="el" href="cpp_static_examples.html">Static Examples</a></li><li class="navelem"><a class="el" href="cpp_static_example_traction.html">3D traction test</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
