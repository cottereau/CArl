\hypertarget{libmesh__apply__solution__homogeneous_8cpp}{}\section{/\+Users/breubreubreu/\+Programming/\+C\+Arl/\+Cpp/src/execs/ext\+\_\+solver\+\_\+libmesh/libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.cpp File Reference}
\label{libmesh__apply__solution__homogeneous_8cpp}\index{/\+Users/breubreubreu/\+Programming/\+C\+Arl/\+Cpp/src/execs/ext\+\_\+solver\+\_\+libmesh/libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp@{/\+Users/breubreubreu/\+Programming/\+C\+Arl/\+Cpp/src/execs/ext\+\_\+solver\+\_\+libmesh/libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp}}
{\ttfamily \#include \char`\"{}libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{libmesh__apply__solution__homogeneous_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{libmesh__apply__solution__homogeneous_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{}\index{libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp@{libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp}!main@{main}}
\index{main@{main}!libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp@{libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp}}
\subsubsection[{main(int argc, char $\ast$$\ast$argv)}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}\label{libmesh__apply__solution__homogeneous_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


Definition at line 3 of file libmesh\+\_\+apply\+\_\+solution\+\_\+homogeneous.\+cpp.


\begin{DoxyCode}
3                                 \{
4 
5     \textcolor{comment}{// --- Initialize libMesh}
6     libMesh::LibMeshInit init(argc, argv);
7 
8     \textcolor{comment}{// Do performance log?}
9     libMesh::PerfLog perf\_log(\textcolor{stringliteral}{"Main program"});
10 
11     \textcolor{comment}{// libMesh's C++ / MPI communicator wrapper}
12     libMesh::Parallel::Communicator& WorldComm = init.comm();
13 
14     \textcolor{comment}{// --- Set up inputs}
15 
16     \textcolor{comment}{// Command line parser}
17     GetPot command\_line(argc, argv);
18 
19     \textcolor{comment}{// File parser}
20     GetPot field\_parser;
21 
22     \textcolor{comment}{// If there is an input file, parse it to get the parameters. Else, parse the command line}
23     std::string input\_filename;
24     \textcolor{keywordflow}{if} (command\_line.search(2, \textcolor{stringliteral}{"--inputfile"}, \textcolor{stringliteral}{"-i"})) \{
25         input\_filename = command\_line.next(input\_filename);
26         field\_parser.parse\_input\_file(input\_filename, \textcolor{stringliteral}{"#"}, \textcolor{stringliteral}{"\(\backslash\)n"}, \textcolor{stringliteral}{" \(\backslash\)t\(\backslash\)n"});
27     \} \textcolor{keywordflow}{else} \{
28         field\_parser = command\_line;
29     \}
30 
31     \hyperlink{structcarl_1_1libmesh__apply__solution__input__params}{carl::libmesh\_apply\_solution\_input\_params} input\_params;
32     \hyperlink{namespacecarl_a902f88f3c52c6fc9c974bc99832e78a7}{carl::get\_input\_params}(field\_parser, input\_params);
33 
34     \textcolor{comment}{// Check libMesh installation dimension}
35     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dim = 3;
36 
37     libmesh\_example\_requires(dim == LIBMESH\_DIM, \textcolor{stringliteral}{"3D support"});
38 
39     \textcolor{comment}{// - Parallelized meshes A}
40     libMesh::Mesh system\_mesh(WorldComm, dim);
41     system\_mesh.read(input\_params.\hyperlink{structcarl_1_1libmesh__apply__solution__input__params_a33971a2a268cd16c0cde8b5c409a82c2}{input\_mesh});
42     system\_mesh.prepare\_for\_use();
43 
44     \textcolor{comment}{// Set the equation systems object}
45     libMesh::EquationSystems equation\_systems(system\_mesh);
46 
47     \textcolor{comment}{// Add linear elasticity and stress}
48     libMesh::LinearImplicitSystem& elasticity\_system
49                                         = \hyperlink{_c_arl__assemble__coupling_8cpp_a1fab87d9dc5c891ae8234cec6cf73491}{add\_elasticity}(equation\_systems);
50     \hyperlink{common__assemble__functions__elasticity__3_d_8cpp_ad95879d1efa8b4e69af5946d65a611cd}{add\_stress}(equation\_systems);
51 
52     \textcolor{comment}{// Initialize the equation systems}
53     equation\_systems.init();
54 
55     \textcolor{comment}{// Homogeneous physical properties}
56     \hyperlink{assemble__functions__elasticity__3_d_8cpp_aea23a05af24215485f869a40649d9323}{set\_homogeneous\_physical\_properties}(equation\_systems, input\_params.
      \hyperlink{structcarl_1_1libmesh__apply__solution__input__params_af880101c2a6abd220f3493093fe46fcc}{physical\_params\_file});
57 
58     \textcolor{comment}{// Read the solution vector}
59     libMesh::PetscVector<libMesh::Real> * sol\_vec\_ptr = 
      libMesh::cast\_ptr<libMesh::PetscVector<libMesh::Real> * >(elasticity\_system.solution.get());
60     \hyperlink{namespacecarl_a4d0e2c60b0765dc8182c95362c5d329a}{carl::read\_PETSC\_vector}(sol\_vec\_ptr->vec(),input\_params.
      \hyperlink{structcarl_1_1libmesh__apply__solution__input__params_a0a4b0ce9385310f7378137e37d67c41f}{input\_vector}, WorldComm.get());
61 
62     \textcolor{comment}{// Close it and update}
63     elasticity\_system.solution->close();
64     elasticity\_system.update();
65 
66     \textcolor{comment}{// Calculate the stress}
67     \hyperlink{assemble__functions__elasticity__3_d_8cpp_a1b5f0b2890232d0fe23bbfa3fef621eb}{compute\_stresses}(equation\_systems);
68 
69     \textcolor{comment}{// Export solution}
70 \textcolor{preprocessor}{#ifdef LIBMESH\_HAVE\_EXODUS\_API}
71         libMesh::ExodusII\_IO exo\_io\_interface(system\_mesh, \textcolor{comment}{/*single\_precision=*/}\textcolor{keyword}{true});
72 
73         std::set<std::string> system\_names;
74         system\_names.insert(\textcolor{stringliteral}{"Elasticity"});
75         exo\_io\_interface.write\_equation\_systems(input\_params.\hyperlink{structcarl_1_1libmesh__apply__solution__input__params_a02068cf34d7ddcd7500fff976e8b8950}{output\_mesh},equation\_systems,&
      system\_names);
76         exo\_io\_interface.write\_element\_data(equation\_systems);
77 \textcolor{preprocessor}{#endif}
78 
79     \textcolor{keywordflow}{return} 0;
80 \}
\end{DoxyCode}
