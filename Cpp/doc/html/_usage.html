<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>CArl: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CArl
   </div>
   <div id="projectbrief">Code Arlequin / C++ implementation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_usage.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="contents">
<div class="textblock"><p>This page contains the documentation and examples for the <code>CArl</code> library, an implementation of the Arlequin method based on libMesh and CGAL.</p>
<p>The classes of this library can be classified into three large groups:</p><ol type="1">
<li>mesh intersection search and construction classes;</li>
<li>coupling matrix assemble and system initialization classes; and</li>
<li>coupled system and external solvers.</li>
</ol>
<h1><a class="anchor" id="inter_classes"></a>
Intersection classes</h1>
<div class="image">
<img src="patches_final_article.png" alt="patches_final_article.png"/>
</div>
<p>Code example: parallel_intersection_test.cpp</p>
<p>Classes:**</p><ul>
<li><a class="el" href="classcarl_1_1_intersection___search.html" title="Class containing the structure needed to find all the intersections between two meshes, inside the coupling region mesh. ">carl::Intersection_Search</a> :<ul>
<li>Main user interface.</li>
<li>Intersection search and construction algorithms.</li>
<li>Generate local intersection tables and meshes.</li>
<li>Method examples: <a class="el" href="classcarl_1_1_intersection___search.html#aa2312fdcb8d8203f9d07b2b638c62798" title="Do a preliminary search, to optimize the intersection search and construction. ">carl::Intersection_Search::PreparePreallocationAndLoad</a>, <a class="el" href="classcarl_1_1_intersection___search.html#aa84f57dd84826955813efe60c87d199d" title="Find and build all the intersections. ">carl::Intersection_Search::BuildIntersections</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1_intersection___tools.html" title="Class with a series of methods to find the intersections between libMesh&#39;s elements, using CGAL internally. ">carl::Intersection_Tools</a> :<ul>
<li>Methods to intersect elements, using CGAL's Nef polyhedrons.</li>
<li>Method examples: <a class="el" href="classcarl_1_1_intersection___tools.html#a98929a97acb94aa77fc8952d80993d88" title="Determinate if two elements intersect inside the coupling region. ">carl::Intersection_Tools::libMesh_exact_do_intersect_inside_coupling</a>, <a class="el" href="classcarl_1_1_intersection___tools.html#ad5aaf7b9475dcfb6a51ea1c20d22aacd" title="Build the intersection between two elements intersect inside the coupling region. ...">carl::Intersection_Tools::libMesh_exact_intersection_inside_coupling</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1_mesh___intersection.html" title="Class used to construct the intersection meshes. ">carl::Mesh_Intersection</a> :<ul>
<li>Mesh the intersection polyhedrons, using either CGAL or libMesh / tetgen.</li>
<li>Method examples: <a class="el" href="classcarl_1_1_mesh___intersection.html#aa8a75085ca6f75f96ad47e36b6dd8509" title="Triangulate an intersection defined by a set of libMesh::Points, using either CGAL or Tetgen...">carl::Mesh_Intersection::triangulate_intersection</a>, <a class="el" href="classcarl_1_1_mesh___intersection.html#a154a8076123b209a1bddc210c913006f" title="Increase the intersection mesh with the current polyhedron mesh and update its data structures...">carl::Mesh_Intersection::increase_intersection_mesh</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1_patch__construction.html" title="Class used to build a mesh patch from a parent mesh and an coupling mesh element. ...">carl::Patch_construction</a> :<ul>
<li>Construction of the mesh patches, used to distribute the intersection search over the processors.</li>
<li>Also contains interfaces needed for the "advancing front" intersection search method.</li>
<li>Method examples: <a class="el" href="classcarl_1_1_patch__construction.html#aebb82c6e34f4cf38cf3e4ef2ac32b664" title="Build the patch mesh covering a given &quot;Query_elem&quot;. ">carl::Patch_construction::BuildPatch</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1_mesh__restriction.html" title="Class used to build a restriction of a parent mesh to the coupling region. ">carl::Mesh_restriction</a> :<ul>
<li>Construction of the restriction of a mesh to the coupling region.</li>
<li>Derived from <a class="el" href="classcarl_1_1_patch__construction.html" title="Class used to build a mesh patch from a parent mesh and an coupling mesh element. ...">carl::Patch_construction</a>.</li>
<li>Method examples: <a class="el" href="classcarl_1_1_mesh__restriction.html#adce7d5a94e5e65f5bee4145eb25ebd61" title="Build the restriction of the parent mesh to the coupling region defined by Coupling_mesh. ">carl::Mesh_restriction::BuildRestriction</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1_stitch___meshes.html" title="Class used to stitch together different meshes. ">carl::Stitch_Meshes</a> :<ul>
<li>Methods to stitch together meshes with compatible interfaces (such as the intersection meshes).</li>
<li>As a by-product, it also contains methods to generate global intersection tables</li>
<li>Method examples: <a class="el" href="classcarl_1_1_stitch___meshes.html#a6bd4cd30b05f59a0f116be684232b58d" title="Join the intersection tables. ">carl::Stitch_Meshes::join_tables</a>, <a class="el" href="classcarl_1_1_stitch___meshes.html#aca02448f523029690eb839fc7021b3bb" title="Stitch the meshes. ">carl::Stitch_Meshes::stitch_meshes</a> ...</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="coupling_assemble"></a>
Coupling matrix assembly and system definition</h1>
<div class="image">
<img src="function_projection.png" alt="function_projection.png"/>
</div>
<p>Code example: carl_libmesh_fissure.cpp</p>
<p>Classes:**</p><ul>
<li>carl::coupled_system :<ul>
<li>Main user interface.</li>
<li>Contains the coupling matrices and their assemble algorithms.</li>
<li>Contains pointers to the system objects (libMesh::EquationSystems)</li>
<li>Contains pointers to the external system solver interfaces and to the coupled system solver (more about them further down).</li>
<li>Method examples: carl::coupled_system::add_micro_EquationSystem, carl::coupled_system::add_Restricted_micro_EquationSystem, carl::coupled_system::assemble_coupling_elasticity_3D_parallel, carl::coupled_system::set_corrected_shapes ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1lib_mesh__fe__addresses__3.html">carl::libMesh_fe_addresses_3</a> :<ul>
<li>Hides repeated libMesh-based code used to assemble the matrices: degree of freedom (DoF) tables, quadrature rules ...</li>
<li>Method examples: <a class="el" href="classcarl_1_1lib_mesh__fe__addresses__3.html#a5b3ed2307324193887a1d07708654b15">carl::libMesh_fe_addresses_3::set_DoFs</a> ...</li>
</ul>
</li>
<li><a class="el" href="classcarl_1_1coupling__matrices__3.html">carl::coupling_matrices_3</a> :<ul>
<li>Fills the coupling matrices with the L2 and H1 terms.</li>
<li>Method examples: carl::coupling_matrices::build_L2_coupling_matrix, carl::coupling_matrices::add_H1_coupling_matrix ...</li>
</ul>
</li>
</ul>
<p>Functions:**</p><ul>
<li>Read and set the several tables used: intersection, weight parameter domains, equivalence between the full and restricted meshes ...<ul>
<li><a class="el" href="namespacecarl.html#a8d1c90daac3238ed5d53465740e072b3">carl::set_local_intersection_tables</a>, <a class="el" href="namespacecarl.html#aab1c0aca80d848937579e63a21c9a270">carl::set_weight_function_domain_idx</a>, <a class="el" href="namespacecarl.html#a995bb6a3c01d8cede8268c2f39ce0768">carl::set_equivalence_tables</a> ...</li>
</ul>
</li>
<li>Calculate the L2 and H1 terms for a given quadrature point<ul>
<li><a class="el" href="weak__formulations_8h.html#a415ddf4a904e8a45e4a3b14adb459e63">L2_Coupling</a>, <a class="el" href="weak__formulations_8h.html#a9fcc3dd62b4a38808d4cfdae87d771e4">H1_Coupling_Extra_Term</a></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="coupling_solver"></a>
Coupled system and external solvers solvers</h1>
<div class="image">
<img src="coupling_250_micro_deformed_with_macro_solid.png" alt="coupling_250_micro_deformed_with_macro_solid.png"/>
</div>
<p>Code example: carl_libmesh_fissure.cpp</p>
<p>Classes:**</p><ul>
<li>carl::coupled_system :<ul>
<li>Main user interface.</li>
<li>Calls the coupled system solver and the external solvers.</li>
<li>Method examples: carl::coupled_system::set_CG_solver, carl::coupled_system::set_LATIN_solver, carl::coupled_system::solve ...</li>
</ul>
</li>
<li>carl::coupled_solver :<ul>
<li>Mostly a virtual class, contains common interfaces to different coupled solvers. carl::PETSC_CG_coupled_solver : CG / FETI solver implementation. carl::PETSC_LATIN_coupled_solver : LATIN solver implementation.</li>
<li>Method examples: carl::coupled_solver::set_forces, carl::coupled_solver::set_matrices, carl::coupled_solver::solve ...</li>
</ul>
</li>
<li>carl::generic_solver_interface :<ul>
<li>Mostly a virtual class, contains common interfaces to different external solvers. carl::KSP_linear_solver : PETSC / libMesh linear Krylov solver interface.</li>
<li>Method examples: carl::generic_solver_interface::apply_ZMinvZt, carl::generic_solver_interface::solve ...</li>
</ul>
</li>
<li>carl::base_CG_solver :<ul>
<li>Implementation of the conjugate gradient solver, including projection operations needed by the FETI coupled solver. Could be used to solve LATIN's decoupled step (partially implemented).</li>
<li>Method examples: carl::base_CG_solver::set_solver_CG, carl::base_CG_solver::set_solver_LATIN, carl::base_CG_solver::apply_CG_nullspace_residual_projection, carl::base_CG_solver::solve ...</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="todo"></a>
Work to do ...</h1>
<ul>
<li>Better document the input / output files formats.</li>
<li>Finish generalizing the external solver interfaces (internally, they are general, but the interfaces themselves are not complete).</li>
<li>Set up the Amitex external solver interface.</li>
<li>Re-implement the LATIN solver to use the CG solver. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
