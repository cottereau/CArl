#!/bin/bash

#PBS -S /bin/bash
#PBS -N test_ae_1k
#PBS -l walltime=3:59:00
#PBS -l select=1:ncpus=4:mpiprocs=4

# "fusion" PBS options
# #PBS -q haswellq
# #PBS -P [PROJECT NAME]

# Chargement des modules
# "fusion" cluster modules
# module purge
# module load intel-compilers/16.0.3
# module load intel-mpi/5.1.2

# On se place dans le repertoire depuis lequel le job a ete soumis
cd $PBS_O_WORKDIR

mkdir -p examples/coupled_traction_test/FETI_solver/brick_traction_1k/system_matrices

echo " --- Assemble clamped coupled model ..."
mpirun -np 4 ./libmesh_assemble_lin_homogeneous__min_x_clamped -i examples/coupled_traction_test/FETI_solver/brick_traction_1k/assemble_brick_traction_A_1k.txt 

echo " --- Assemble traction coupled model ..."
mpirun -np 4 ./libmesh_assemble_lin_homogeneous__max_x_traction -i examples/coupled_traction_test/FETI_solver/brick_traction_1k/assemble_brick_traction_B_1k.txt